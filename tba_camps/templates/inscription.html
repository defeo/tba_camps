{% extends "base.html" %}
{% load static %}
{% load forms %}

{% block title %}S'inscrire aux camps de Basket TBA{% endblock %}

{% block description %}Les formulaires pour s'inscrire en ligne aux
camps de Basket TBA et qui permet la réservation définitive des
réception par TBA du chèque d'acompte. Chèque qui doit parvenir à TBA
dans un délai de 8 jours faute de quoi la réservation est
automatiquement annulée.{% endblock %}

{% block extrahead %}
<style>
  #id_sexe li, #id_licencie li, #id_venu li, 
  #id_navette_a li, #id_navette_r li { display: inline; }

  #id_formule { font-weight: bold }
  #id_formule .prix { float: right }
  #id_formule .description { 
    display: block;
    font-weight: normal;
    padding-left: 4ex;
  }

  #id_formule label, #id_hebergement label { width: 100% }
  #id_formule > li:hover { background-color: inherit }
  #id_formule > li > ul { margin: 1ex 0 2ex 2ex }
  #id_formule > li > div { font-size: larger; font-weight: normal }

  #id_hebergement {
    font-weight: bold;
  }
  #id_hebergement p { 
    font-weight: normal;
    margin: 0.1ex 0 0.5ex 2ex;
    max-height: 0;
    overflow: hidden;
    transition: max-height 2s;
    -webkit-transition: max-height 2s;
    -o-transition: max-height 2s;
  }
  #id_hebergement input:checked ~ p,
  #id_hebergement li:hover p {
    max-height: 100ex;
  }

  #pay-block { display: inline-block }
  #cost-summary { 
    display: inline-table;
    vertical-align: middle;
    border-collapse: collapse;
    margin: 1em 0 0 4em;
  }
  #cost-summary tfoot { border-top : solid thin black }
  #cost-summary td:nth-child(2) { 
    width: 3em;
    text-align: right;
    padding: 0 1ex 0 6ex;
  }
  #cost-summary .total { font-weight: bold }
</style>
{% endblock %}

{% block content %}

<p style="text-align:center;color:#f00;font-weight:bold;font-size:30px">BULLETIN D'INSCRIPTION {{ settings.ANNEE }}</p>

<p style="text-align:center;font-weight:bold;color:#00f">Votre
      réservation ne sera définitive qu'à la réception de votre chèque
      d'acompte.  Attention, ce chèque doit nous parvenir dans un
      délai de 8 jours sinon votre réservation est automatiquement
      annulée.</p>

<p style="text-align:center">
  <a href="{% url 'inscription_reminder' %}">Vous êtes déjà inscrit et
  vous souhaitez recevoir un email de confirmation, cliquez ici.</a>
</p>

<p style="text-align:center;font-size:80%">Les champs marqués d'une étoile * sont obligatoires</p>

{% if form.errors %}
<div class="error">
  <p>ERREUR&nbsp;: Veuillez corriger les erreurs ci-dessous.</p>
  <ul style="margin: 2ex">
    {% for e in form.non_field_errors %}
    <li>{{ e }}</li>
    {% endfor %}
  </ul>
</div>
{% endif %}

<form action="" method="post" class="pure-form pure-form-aligned">
  {% csrf_token %}

  <div id="personal-data" class="fieldgroup">
    <h3>Données personnelles</h3>

    <fieldset>
      {{ form.nom | cgroup }}
      {{ form.prenom | cgroup }}
      {{ form.email | cgroup }}
      {{ form.email2 | cgroup }}
    </fieldset>

    <fieldset>
      {{ form.adresse | cgroup }}
      {{ form.cp | cgroup }}
      {{ form.ville | cgroup }}
      {{ form.pays | cgroup }}
      {{ form.tel | cgroup }}
    </fieldset>

    <fieldset>
      {{ form.naissance | cgroup }}
      {{ form.lieu | cgroup }}
      {{ form.sexe | cgroup }}
      {{ form.taille | cgroup }}
      {{ form.licencie | cgroup }}
      {{ form.venu | cgroup }}
    </fieldset>
  </div>

  <div id="inscription-data" class="fieldgroup">
    <h3>Inscription (<a href="{% url 'pratique' %}">plus d'infos</a>)</h3>

    <fieldset>
      {{ form.semaines | cgroup }}
      {{ form.formule | cgroup }}
      {{ form.hebergement | cgroup }}
      {{ form.chambre | cgroup }}
      {{ form.train | cgroup }}
      {{ form.navette_a | cgroup }}
      {{ form.navette_r | cgroup }}

      <div id="pay-block">
      {{ form.assurance | cgroup }}
      {{ form.mode | cgroup }}
      </div>

      <table id="cost-summary">
	<tbody>
	<tr class="prix"><td>Formule</td><td></td><td></td></tr>
	<tr class="cotisation"><td>Cotisation TBA</td><td></td><td></td></tr>
	<tr class="taxe"><td>Taxe menage</td><td></td><td></td></tr>
	<tr class="train"><td>Supplément train</td><td></td><td></td></tr>
	<tr class="navette"><td>Navette</td><td></td><td></td></tr>
	<tr class="assurance"><td>Assurance</td><td></td><td></td></tr>
	</tbody>
	<tfoot>
	<tr class="total"><td>Total</td><td></td></tr>
	<tr class="acompte"><td>Acompte</td><td></td></tr>
	</tfoot>
      </table>
    </fieldset>
  </div>

  <div id="parrain-data" class="fieldgroup">
    <h3>Parrainage</h3>

    <fieldset>
      {{ form.nom_parrain | cgroup }}
      {{ form.adr_parrain | cgroup }}
    </fieldset>
  </div>
  
  
  <div id="parrain-data" class="fieldgroup {{ form.captcha.css_classes }}">
    {{ form.captcha }}
    {{ form.captcha.errors }}
  </div>

  <button type="submit" class="pure-button pure-button-primary">S'inscrire</button>
</form>

{% endblock %}
